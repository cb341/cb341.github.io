{%- assign site_url = "https://cb341.dev" -%}
{%- assign default_title = "Dani Bengl - Full-Stack Developer" -%}
{%- assign default_description = "Full-stack software developer specializing in Ruby on Rails, web applications, and modern development practices. Portfolio, blog, and projects." -%}
{%- comment -%} " | " separator: e.g. "About | Dani Bengl - Full-Stack Developer" {%- endcomment -%}
{%- assign page_title = page.title | append: " | " | append: default_title | default: default_title -%}
{%- assign page_description = page.description | default: default_description -%}
{%- assign current_url = site_url | append: page.url -%}
{%- comment -%} og_type: posts have page.date set; everything else is a website {%- endcomment -%}
{%- if page.date -%}
  {%- assign og_type = "article" -%}
{%- else -%}
  {%- assign og_type = "website" -%}
{%- endif -%}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page_title }}</title>
    <meta name="title" content="{{ page_title }}">
    <meta name="description" content="{{ page_description }}">
    <meta name="author" content="Dani Bengl">
    <link rel="canonical" href="{{ current_url }}">
    <meta property="og:type" content="{{ og_type }}">
    <meta property="og:url" content="{{ current_url }}">
    <meta property="og:title" content="{{ page_title }}">
    <meta property="og:description" content="{{ page_description }}">
    <meta property="og:image" content="{{ site_url }}/og-image.png">
    <meta property="og:site_name" content="CB341.DEV">
    <meta property="og:locale" content="en_US">
    <!-- TODO: create og-image.png for social sharing previews -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ current_url }}">
    <meta property="twitter:title" content="{{ page_title }}">
    <meta property="twitter:description" content="{{ page_description }}">
    <meta property="twitter:image" content="{{ site_url }}/og-image.png">
    <meta property="twitter:creator" content="@cb341">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#ffffff">
    <link rel="alternate" type="application/rss+xml" title="CB341.DEV RSS Feed" href="/rss.xml">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "{% if og_type == 'article' %}BlogPosting{% else %}WebPage{% endif %}",
      "headline": {{ page.title | default: default_title | jsonify }},
      "description": {{ page_description | jsonify }},
      "url": {{ current_url | jsonify }},
      "author": {
        "@type": "Person",
        "name": "Dani Bengl",
        "url": {{ site_url | jsonify }},
        "sameAs": [
          "https://github.com/cb341",
          "https://www.linkedin.com/in/daniel-bengl",
          "https://www.codewars.com/users/cb341"
        ]
      }{% if page.date %},
      "datePublished": "{{ page.date | date_to_xmlschema }}"{% endif %}{% if page.tags %},
      "keywords": {{ page.tags | join: ", " | jsonify }}{% endif %}
    }
    </script>
    <style>
      body {
        max-width: 80ch;
        margin-left: auto;
        margin-right: auto;
        text-align: center;
        overflow-y: scroll;
      }

      /* reset: body centers header/footer, main overrides back to left */
      main {
        text-align: left;
      }

      img {
        width: 100%;
        height: auto;
      }

      pre {
        overflow-x: auto;
      }

      @media (max-width: 880px) {
        body {
          padding: 0.5rem;
        }
        .mobile-table thead {
          display: none;
        }
        .mobile-table tr {
          display: block;
          border-bottom: 1px solid #ddd;
        }
        .mobile-table td {
          display: block;
          border-bottom: none;
        }
        .mobile-table td:before {
          content: attr(data-label) ": ";
          font-weight: bold;
        }
      }
    </style>
  </head>
  <body>
    <header role="banner">
      <h1>{% include navlink.html href="/" label="CB341.DEV" %}</h1>
      <nav role="navigation" aria-label="Main navigation">
        {% include navlink.html href="/" label="Home" %}
        | {% include navlink.html href="/about" label="About" %}
        | {% include navlink.html href="/uses" label="Uses" %}
        | {% include navlink.html href="/til" label="TIL" %}
        | {% include navlink.html href="/blog" label="Blog" %}
        | {% include navlink.html href="/projects" label="Projects" %}
      </nav>
      <nav role="navigation" aria-label="Social media links">
        <a href="https://github.com/cb341" target="_blank" rel="noopener noreferrer">GitHub</a>
        |
        <a href="https://www.codewars.com/users/cb341" target="_blank" rel="noopener noreferrer">Codewars</a>
        |
        <a href="https://mastodon.social/deck/@cb341" target="_blank" rel="noopener noreferrer">Mastodon</a>
        |
        <a href="https://www.linkedin.com/in/daniel-bengl" target="_blank" rel="noopener noreferrer">LinkedIn</a>
      </nav>
    </header>

    <main id="main-content" role="main">
      {{ content }}
      <nav role="navigation" aria-label="Post navigation">
        <hr>
        <a href="https://github.com/cb341/cb341.github.io/blob/main/{{ page.path }}" target="_blank" rel="noopener noreferrer">GitHub</a>
        {%- if page.date %}
        {% if page.previous %}
        | <a href="{{ page.previous.url }}">< {{ page.previous.title }}</a>
        {% endif %}
        {% if page.next %}
        | <a href="{{ page.next.url }}">{{ page.next.title }} ></a>
        {% endif %}
        {%- endif -%}
      </nav>
    </main>

    <footer role="contentinfo">
      <hr>
      <p><small>(c) {{ "now" | date: "%Y" }} cb341. Licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer">CC BY 4.0</a>.</small></p>
      <a href="https://discord.com/users/456151064484249612" target="_blank" rel="noopener noreferrer">Discord</a>
      |
      <a href="https://mastodon.social/deck/@cb341" target="_blank" rel="noopener noreferrer">Mastodon</a>
      |
      <a href="https://www.linkedin.com/in/daniel-bengl" target="_blank" rel="noopener noreferrer">LinkedIn</a>
      |
      <a href="/rss.xml" target="_blank" rel="noopener noreferrer">RSS Feed</a>
    </footer>

    <script>
      function makeTablesResponsive() {
        var tables = document.querySelectorAll("table");

        tables.forEach(function(table) {
          if (table.hasAttribute("data-responsive")) return;
          table.setAttribute("data-responsive", "true");

          var headers = Array.from(table.querySelectorAll("thead th")).map(function(th) {
            return th.textContent ? th.textContent.trim() : "";
          });

          table.classList.add("mobile-table");

          var rows = table.querySelectorAll("tbody tr");
          rows.forEach(function(row) {
            var cells = row.querySelectorAll("td");
            cells.forEach(function(cell, index) {
              if (headers[index]) {
                cell.setAttribute("data-label", headers[index]);
              }
            });
          });
        });
      }

      document.addEventListener("DOMContentLoaded", makeTablesResponsive);
    </script>
  </body>
</html>
